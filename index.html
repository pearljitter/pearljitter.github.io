<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PEARL JITTER ARCHIVE</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: white;
        }

        canvas {
            display: block;
        }
    </style>
</head>

<body>
    <script>
        // ğŸš€ Three.js ê¸°ë³¸ ì„¤ì •
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // ğŸ“Œ 3ì°¨ì› ì™€ì´ì–´í”„ë ˆì„ ê·¸ë¦¬ë“œ ìƒì„±
        const gridSize = 16;  // ê·¸ë¦¬ë“œ í¬ê¸°
        const gridDivisions = 16;  // ê·¸ë¦¬ë“œ ê°„ê²©

        // XZ í‰ë©´ (ë°”ë‹¥ ê·¸ë¦¬ë“œ) - ì„  ìƒ‰ìƒ í°ìƒ‰ìœ¼ë¡œ ì„¤ì •
        const gridHelper = new THREE.GridHelper(gridSize, gridDivisions, 0xffffff, 0xffffff);
        gridHelper.material.opacity = 0.2; // íˆ¬ëª…ë„ 50%ë¡œ ì„¤ì •
        gridHelper.material.transparent = true; // íˆ¬ëª…ë„ ì ìš©ì„ ìœ„í•´ trueë¡œ ì„¤ì •
        scene.add(gridHelper);

        // XY í‰ë©´ (ì„¸ë¡œ ê·¸ë¦¬ë“œ) - ì„  ìƒ‰ìƒ í°ìƒ‰ìœ¼ë¡œ ì„¤ì •
        const gridHelperXY = new THREE.GridHelper(gridSize, gridDivisions, 0xffffff, 0xffffff);
        gridHelperXY.material.opacity = 0.2; // íˆ¬ëª…ë„ 50%ë¡œ ì„¤ì •
        gridHelperXY.material.transparent = true; // íˆ¬ëª…ë„ ì ìš©ì„ ìœ„í•´ trueë¡œ ì„¤ì •
        gridHelperXY.rotation.x = Math.PI / 2;
        scene.add(gridHelperXY);

        // YZ í‰ë©´ (ì˜†ë©´ ê·¸ë¦¬ë“œ) - ì„  ìƒ‰ìƒ í°ìƒ‰ìœ¼ë¡œ ì„¤ì •
        const gridHelperYZ = new THREE.GridHelper(gridSize, gridDivisions, 0xffffff, 0xffffff);
        gridHelperYZ.material.opacity = 0.2; // íˆ¬ëª…ë„ 50%ë¡œ ì„¤ì •
        gridHelperYZ.material.transparent = true; // íˆ¬ëª…ë„ ì ìš©ì„ ìœ„í•´ trueë¡œ ì„¤ì •
        gridHelperYZ.rotation.z = Math.PI / 2;
        scene.add(gridHelperYZ);


        // ğŸ“š í…ìŠ¤íŠ¸ ìƒì„± í•¨ìˆ˜
        function createText(text, position) {
            const loader = new THREE.FontLoader();
            loader.load('https://threejs.org/examples/fonts/helvetiker_regular.typeface.json', function (font) {
                const textGeometry = new THREE.TextGeometry(text, {
                    font: font,
                    size: 0.5,
                    height: 0,
                    curveSegments: 12,
                });

                const textMaterial = new THREE.MeshBasicMaterial({ color: 0xffffff });
                const mesh = new THREE.Mesh(textGeometry, textMaterial);
                mesh.position.set(position.x, position.y, position.z);
                scene.add(mesh);
            });
        }

        // xì¶• ìµœëŒ“ê°’, ìµœì†Ÿê°’ í…ìŠ¤íŠ¸ ì¶”ê°€
        createText('CONCRETE', new THREE.Vector3(gridSize / 1.8, 0, 0));
        createText('ABSTRACT', new THREE.Vector3(-gridSize / 1.1, 0, 0));

        // Yì¶• ìµœëŒ“ê°’, ìµœì†Ÿê°’ í…ìŠ¤íŠ¸ ì¶”ê°€
        createText('BIG', new THREE.Vector3(0, gridSize / 1.8, 0));
        createText('SMALL', new THREE.Vector3(0, -gridSize / 1.8, 0));

        // Zì¶• ìµœëŒ“ê°’, ìµœì†Ÿê°’ í…ìŠ¤íŠ¸ ì¶”ê°€
        createText('SERIOUS', new THREE.Vector3(0, 0, gridSize / 1.8));
        createText('PLAYFUL', new THREE.Vector3(0, 0, -gridSize / 1.8));

        // ğŸ“ í°ìƒ‰ ì  ì¶”ê°€ (5ê°œ) - íŠ¹ì • ì¢Œí‘œë¡œ ê³ ì •
        const whiteDotMaterial = new THREE.MeshBasicMaterial({ color: 0xffffff });  // í°ìƒ‰ ì¬ì§ˆ
        const dots = []; // ì ë“¤ì„ ì €ì¥í•  ë°°ì—´
        const dotUrls = [  // ì ë§ˆë‹¤ ë‹¤ë¥¸ URL ì„¤ì •
            "fuzzy.html",
            "chunking.html",
            "ski.html",
            "dragon.html",
            "galaga.html",
            "pacguy.html",
            "gather.html",
            "tanghulu.html",
            "blog.html",
            "planmove.html"
        ];

        // ê³ ì •ëœ íŠ¹ì • ì¢Œí‘œë“¤
        const fixedPositions = [
            new THREE.Vector3(2, 3, 4),
            new THREE.Vector3(-3, -2, 5),
            new THREE.Vector3(4, -1, -3),
            new THREE.Vector3(-5, 4, 2),
            new THREE.Vector3(1, 5, -4),
            new THREE.Vector3(0, -2, 5),
            new THREE.Vector3(4, 0, -1),
            new THREE.Vector3(-2, 4, 2),
            new THREE.Vector3(1, 1, -4),
            new THREE.Vector3(3, -5, -6)
        ];

        // ì ì— í…ìŠ¤íŠ¸ì™€ ì´ë¯¸ì§€ë¥¼ ì¶”ê°€í•˜ëŠ” í•¨ìˆ˜
        function createDotTextAndImage(dot, text) {
            const loader = new THREE.FontLoader();
            loader.load('https://threejs.org/examples/fonts/helvetiker_regular.typeface.json', function (font) {
                const textGeometry = new THREE.TextGeometry(text, {
                    font: font,
                    size: 0.3,
                    height: 0,
                    curveSegments: 12,
                });

                const textMaterial = new THREE.MeshBasicMaterial({ color: 0xffffff });
                const textMesh = new THREE.Mesh(textGeometry, textMaterial);
                textMesh.position.set(dot.position.x + 0.5, dot.position.y, dot.position.z);
                scene.add(textMesh);
                dot.textMesh = textMesh;  // ì ì— í…ìŠ¤íŠ¸ ë©”ì‰¬ë¥¼ ì¶”ê°€
            });

            // ì´ë¯¸ì§€ í‰ë©´ ìƒì„±
            const textureLoader = new THREE.TextureLoader();
            const texture = textureLoader.load(`https://example.com/images/${text}.png`);  // ì´ë¯¸ì§€ ê²½ë¡œ ì„¤ì •
            const planeGeometry = new THREE.PlaneGeometry(1, 1);
            const planeMaterial = new THREE.MeshBasicMaterial({ map: texture, transparent: true });
            const plane = new THREE.Mesh(planeGeometry, planeMaterial);
            plane.position.set(dot.position.x, dot.position.y + 1, dot.position.z); // ì  ìœ„ì— í‰ë©´ì„ ë°°ì¹˜
            plane.visible = false;  // ì²˜ìŒì—ëŠ” ìˆ¨ê²¨ë‘ 
            scene.add(plane);
            dot.imagePlane = plane;  // ì ì— ì´ë¯¸ì§€ í‰ë©´ì„ ì¶”ê°€
        }

        // ì  5ê°œ ìƒì„± (ê³ ì •ëœ ìœ„ì¹˜ì— ë°°ì¹˜)
        for (let i = 0; i < 10; i++) {
            const dotGeometry = new THREE.SphereGeometry(0.2, 32, 32);  // ì‘ì€ êµ¬ì²´
            const whiteDot = new THREE.Mesh(dotGeometry, whiteDotMaterial);
            whiteDot.position.copy(fixedPositions[i]);  // ê³ ì •ëœ ìœ„ì¹˜ë¡œ ì„¤ì •
            scene.add(whiteDot);
            whiteDot.url = dotUrls[i]; // ê° ì ì— URL ì¶”ê°€
            dots.push(whiteDot); // ì  ë°°ì—´ì— ì¶”ê°€

            // ì  ì˜†ì— í…ìŠ¤íŠ¸ ë° ì´ë¯¸ì§€ ì¶”ê°€
            createDotTextAndImage(whiteDot, "No." + (i + 1));
        }

        // ì¹´ë©”ë¼ ìœ„ì¹˜ ì¡°ì •
        camera.position.set(10, 10, 10);  // ì¹´ë©”ë¼ ìœ„ì¹˜ ì„¤ì •
        camera.lookAt(0, 0, 0);  // ì¹´ë©”ë¼ê°€ (0, 0, 0) ë°©í–¥ì„ ë³´ë„ë¡ ì„¤ì •

        // ğŸ® ë§ˆìš°ìŠ¤ë¡œ íšŒì „ ì œì–´
        let isDragging = false;
        let previousMousePosition = { x: 0, y: 0 };
        const rotationSpeed = 0.005;  // íšŒì „ ì†ë„ ì¡°ì •
        let currentRotation = { x: 0, y: 0 };  // í˜„ì¬ íšŒì „ ìƒíƒœ

        // ë§ˆìš°ìŠ¤ ë“œë˜ê·¸ ì‹œì‘
        function onMouseDown(event) {
            isDragging = true;
            previousMousePosition = { x: event.clientX, y: event.clientY };
        }

        // ë§ˆìš°ìŠ¤ ë“œë˜ê·¸ ì¢…ë£Œ
        function onMouseUp(event) {
            isDragging = false;
        }

        // ë§ˆìš°ìŠ¤ ì´ë™
        function onMouseMove(event) {
            if (!isDragging) return;

            const deltaX = event.clientX - previousMousePosition.x;
            const deltaY = event.clientY - previousMousePosition.y;

            // íšŒì „ ì†ë„ ì¡°ì • (ë¶€ë“œëŸ½ê²Œ)
            currentRotation.y += deltaX * rotationSpeed;
            currentRotation.x += deltaY * rotationSpeed;

            // íšŒì „ ë²”ìœ„ ì œí•œ (xì¶•ê³¼ yì¶• íšŒì „ ë²”ìœ„ ì„¤ì •)
            currentRotation.x = Math.max(Math.min(currentRotation.x, Math.PI / 2), -Math.PI / 2);
            currentRotation.y = (currentRotation.y + Math.PI) % (Math.PI * 2) - Math.PI;  // -PI ~ PI ë²”ìœ„ë¡œ ì œí•œ

            // íšŒì „ ì ìš©
            scene.rotation.x = currentRotation.x;
            scene.rotation.y = currentRotation.y;

            // ì´ì „ ë§ˆìš°ìŠ¤ ìœ„ì¹˜ ì—…ë°ì´íŠ¸
            previousMousePosition = { x: event.clientX, y: event.clientY };
        }

        window.addEventListener("mousedown", onMouseDown);
        window.addEventListener("mouseup", onMouseUp);
        window.addEventListener("mousemove", onMouseMove);

        // ğŸ”„ ì• ë‹ˆë©”ì´ì…˜ ë£¨í”„
        function animate() {
            requestAnimationFrame(animate);
            renderer.render(scene, camera);
        }
        animate();

        // ğŸ“ ë§ˆìš°ìŠ¤ í´ë¦­ìœ¼ë¡œ ì  í´ë¦­ ê°ì§€
        function onMouseClick(event) {
            const mouse = new THREE.Vector2();
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;

            const raycaster = new THREE.Raycaster();
            raycaster.setFromCamera(mouse, camera);

            // ëª¨ë“  ì ë“¤ì— ëŒ€í•´ raycasting
            for (let i = 0; i < dots.length; i++) {
                const dot = dots[i];
                const intersects = raycaster.intersectObject(dot);

                if (intersects.length > 0) {
                    window.location.href = dot.url;  // í•´ë‹¹ ì ì˜ URLë¡œ ì´ë™
                    break;
                }
            }
        }

        window.addEventListener("click", onMouseClick, false);


        // ğŸ“ ì  í¬ê¸° ë³€ê²½: ë§ˆìš°ìŠ¤ê°€ ì ì— ê°€ê¹Œì›Œì§€ë©´ í¬ê¸°ê°€ ë‘ ë°°ë¡œ ì»¤ì§, ê·¸ë¦¬ê³  ì´ë¯¸ì§€ í‘œì‹œ
        function onMouseMoveForScaling(event) {
            const mouse = new THREE.Vector2();
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;

            const raycaster = new THREE.Raycaster();
            raycaster.setFromCamera(mouse, camera);

            // ëª¨ë“  ì ë“¤ì— ëŒ€í•´ raycasting
            for (let i = 0; i < dots.length; i++) {
                const dot = dots[i];
                const intersects = raycaster.intersectObject(dot);

                // ì´ë¯¸ì§€ divì˜ ê³ ìœ  id
                const imageDivId = "dotImage" + i;

                // ì¼ì • ë²”ìœ„(ì˜ˆ: 100px ì´ë‚´)ì— ë“¤ì–´ê°€ë©´ ì  í¬ê¸° ë‘ ë°°ë¡œ ì¦ê°€
                if (intersects.length > 0) {
                    dot.scale.set(2, 2, 2);  // ì  í¬ê¸° ë‘ ë°°ë¡œ ì¦ê°€

                    // í…ìŠ¤íŠ¸ì™€ ì´ë¯¸ì§€ í‘œì‹œ
                    if (dot.textMesh) {
                        dot.textMesh.visible = true;  // í…ìŠ¤íŠ¸ í‘œì‹œ
                    }

                    // ì´ë¯¸ì§€ í‘œì‹œ (ìƒˆë¡œìš´ div ìƒì„±)
                    let imageDiv = document.getElementById(imageDivId);
                    if (!imageDiv) {
                        imageDiv = document.createElement('div');
                        imageDiv.id = imageDivId;
                        imageDiv.style.position = 'absolute';
                        imageDiv.style.width = '100px';
                        imageDiv.style.height = '100px';
                        imageDiv.style.pointerEvents = 'none';  // ì´ë¯¸ì§€ í´ë¦­ ë°©ì§€
                        document.body.appendChild(imageDiv);
                    }
                    imageDiv.style.display = 'block';  // ì´ë¯¸ì§€ í‘œì‹œ
                    imageDiv.style.left = `${event.clientX - 110}px`;
                    imageDiv.style.top = `${event.clientY - 110}px`;
                    imageDiv.style.backgroundImage = `url('thumbnail/${i + 1}.png')`;  // ì´ë¯¸ì§€ ê²½ë¡œëŠ” 1.png, 2.png ...
                    imageDiv.style.backgroundSize = 'cover';
                } else {
                    dot.scale.set(1, 1, 1);  // ì›ë˜ í¬ê¸°ë¡œ ëŒì•„ì˜´

                    // í…ìŠ¤íŠ¸ ìˆ¨ê¸°ê¸°
                    if (dot.textMesh) {
                        dot.textMesh.visible = false;
                    }

                    // ì´ë¯¸ì§€ ìˆ¨ê¸°ê¸°
                    const imageDiv = document.getElementById(imageDivId);
                    if (imageDiv) {
                        imageDiv.style.display = 'none';
                    }
                }
            }
        }

        window.addEventListener("mousemove", onMouseMoveForScaling, false);


    </script>
</body>

</html>