<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>pearljitter</title>
    <script type="text/javascript" src="js/processing.js"></script>
    <link rel="stylesheet" href="pageStyle.css">
    <link href="https://fonts.googleapis.com/css2?family=Pixelify+Sans&display=swap" rel="stylesheet">
    <style>
        body {
            background-color: rgb(0, 0, 0);
        }
    </style>
</head>

<body>
    <div>
        <script type="text/processing">
          int vghost=8;
          int v[]={vghost, vghost};
          int r=40;
          int gr=25;
          int x=400;
          int y=560;
          int z;
          int per;
          int a[]={400, 400};
          int b[]={360, 480};
          int m[]=new int[200];
          int p[][]=new int[2][10];
          int q[][]=new int[2][10];
          int boo=0;
          int g[][]=new int[9][9];
          int num=-30;
          int btx[]={800/2, 800/2-30, 800/2, 800/2+30};
          int bty[]={900-80, 900-50, 900-20, 900-50};
          PFont f;
          
          void setup() {
            size(800, 900);
            background(0);
            frameRate(20);
            //f=loadFont("Consolas-Bold-48.vlw");
            //textFont(f);
            fill(255);
            for(int i=0;i<200;i++){
              m[i]=1;
            }
            g[1][1]=1;
            g[1][2]=1;
            g[1][3]=1;
            g[1][5]=1;
            g[1][6]=1;
            g[1][7]=1;
            g[2][1]=1;
            g[3][1]=1;
            g[3][3]=1;
            g[3][4]=1;
            g[3][5]=1;
            g[3][7]=1;
            g[4][3]=1;
            g[4][4]=1;
            g[4][5]=1;
            g[4][7]=1;
            g[5][1]=1;
            g[5][2]=1;
            g[5][3]=1;
            g[5][4]=1;
            g[5][5]=1;
            g[5][7]=1;
            g[6][7]=1;
            g[7][1]=1;
            g[7][2]=1;
            g[7][3]=1;
            g[7][5]=1;
            g[7][6]=1;
            g[7][7]=1;
          }
          
          void draw() {
            per=(per+1)%14;
            int k=160;
          
            background(0);
            stroke(#0012C6);
            strokeWeight(30);
            strokeCap(PROJECT);
          
            ////////////background//////////////////
            backgroundd(k);
          
          
            if (boo==0) {
              if (per>=7) {
                textSize(80);
                text("PACGUY", 245, 270);
                textSize(30);
                text("touch to start", 320, 560);
              }
              if (dist(mouseX,mouseY,400,560)<20) {
                boo=1;
              }
            }
          
            if (boo==1) {
              fill(255);
              textSize(50);
              text("GET READY!", 260, 560);
              b[0]-=5;
              b[1]-=5;
              //////////FIRST GHOSTS//////////////
              ////////////////////ghost1///////////////////////////
              noStroke();
              fill(0, 255, 255);
              arc(a[0], b[0], 2*gr, 2*gr, PI, 2*PI);
              beginShape();
              vertex(a[0]-gr, b[0]);
              vertex(a[0]-gr, b[0]+gr);
              vertex(a[0]-gr*3/4+cos(per*2*PI/7)*6, b[0]+gr);
              vertex(a[0]-gr*1/2+cos(per*2*PI/7)*6, b[0]+gr*3/4);
              vertex(a[0]-gr*1/4+cos(per*2*PI/7)*6, b[0]+gr);
              vertex(a[0]+gr*1/4+cos(per*2*PI/7)*6, b[0]+gr);
              vertex(a[0]+gr*1/2+cos(per*2*PI/7)*6, b[0]+gr*3/4);
              vertex(a[0]+gr*3/4+cos(per*2*PI/7)*6, b[0]+gr);
              vertex(a[0]+gr, b[0]+gr);
              vertex(a[0]+gr, b[0]);
              endShape();
          
              fill(255);
              ellipse(a[0]-gr/3, b[0]-gr/4, 12, 16);
              pushMatrix();
              translate(a[0]-gr/3, b[0]-gr/4);
              rotate(0.5*PI-atan2(x-a[0]+gr/3, y-b[0]+gr/4));
              fill(#4856A5);
              ellipse(gr/6, 0, 6, 8);
              popMatrix();
              fill(255);
              ellipse(a[0]+gr/3, b[0]-gr/4, 12, 16);
              pushMatrix();
              translate(a[0]+gr/3, b[0]-gr/4);
              rotate(0.5*PI-atan2(x-a[0]-gr/3, y-b[0]+gr/4));
              fill(#4856A5);
              ellipse(gr/6, 0, 6, 8);
              popMatrix();
          
             ////////////////////ghost2///////////////////////////
              fill(255, 0, 0);
              arc(a[1], b[1], 2*gr, 2*gr, PI, 2*PI);
              beginShape();
              vertex(a[1]-gr, b[1]);
              vertex(a[1]-gr, b[1]+gr);
              vertex(a[1]-gr*3/4+cos(per*2*PI/7)*6, b[1]+gr);
              vertex(a[1]-gr*1/2+cos(per*2*PI/7)*6, b[1]+gr*3/4);
              vertex(a[1]-gr*1/4+cos(per*2*PI/7)*6, b[1]+gr);
              vertex(a[1]+gr*1/4+cos(per*2*PI/7)*6, b[1]+gr);
              vertex(a[1]+gr*1/2+cos(per*2*PI/7)*6, b[1]+gr*3/4);
              vertex(a[1]+gr*3/4+cos(per*2*PI/7)*6, b[1]+gr);
              vertex(a[1]+gr, b[1]+gr);
              vertex(a[1]+gr, b[1]);
              endShape();
          
              fill(255);
              ellipse(a[1]-gr/3, b[1]-gr/4, 12, 16);
              pushMatrix();
              translate(a[1]-gr/3, b[1]-gr/4);
              rotate(0.5*PI-atan2(x-a[1]+gr/3, y-b[1]+gr/4));
              fill(#4856A5);
              ellipse(gr/6, 0, 6, 8);
              popMatrix();
              fill(255);
              ellipse(a[1]+gr/3, b[1]-gr/4, 12, 16);
              pushMatrix();
              translate(a[1]+gr/3, b[1]-gr/4);
              rotate(0.5*PI-atan2(x-a[1]-gr/3, y-b[1]+gr/4));
              fill(#4856A5);
              ellipse(gr/6, 0, 6, 8);
              popMatrix();
          
          
              if (b[0]<=200 && b[1]<=240) {
                boo=2;
              }
              noFill();
            }
          
            if (boo==2) {
              fill(255);
              textSize(30);
              text("SCORE", 80, 840);
              if (per>=7) {
                textSize(30);
                text("insert coin", 600, 840);
              }
          ////////////////draw button////////////////////
              noStroke();
              for (int i=0; i<4; i++) {
                ellipse(btx[i], bty[i], 30, 30);
              }
              pacmove();
          ////////////////////////////////////////wall constraint//////////////////////////////
              if (x>=400-r && x<=400+r && y>=560-r && y<=560+r) {
                y=max(560, y);
              }
              if (x>=400-r && x<=400+r && y>=560+r && y<=720-r) {
                x=400;
              }
              if (x>=400-r && x<=400+r && y>=720-r) {
                y=min(720, y);
              }
              if (x>=80+r && x<=400-r && y>=720-r && y<=720+r) {
                y=720;
              }
              if (x>=80-r && x<=80+r && y>=720-r && y<=720+r) {
                x=max(80, x);
                y=min(y, 720);
              }
              if (x>=80-r && x<=80+r && y>=560+r && y<=720-r) {
                x=80;
              }
              if (x>=80-r && x<=80+r && y>=560-r && y<=560+r) {
                x=max(x, 80);
              }
              if (x>=80+r && x<=400-r && y>=560-r && y<560+r) {
                y=560;
              }
              if (x>=400+r && x<=720-r && y>=720-r && y<=720+r) {
                y=720;
              }
              if (x>=720-r && x<=720+r && y>=720-r && y<=720+r) {
                x=min(720, x);
                y=min(y, 720);
              }
              if (x>=720-r && x<=720+r && y>=240+r && y<=400-r) {
                x=720;
              }
              if (x>=720-r && y>=400-r && y<=400+r) {
                x=max(720, x);
                if (x>=800-r) {
                  x=80;
                }
              }
              if (x>=720-r && x<=720+r && y>=400+r && y<=720-r) {
                x=720;
              }
              if (x>=400+r && x<=560-r && y>=560-r && y<=560+r) {
                y=560;
              }
              if (x>=560-r && x<=560+r && y>=560-r && y<=560+r) {
                x=min(x, 560);
                y=min(y, 560);
              }
              if (x>=560-r && x<=560+r && y>=240+r && y<=560-r) {
                x=560;
              }
              if (x>=560-r && x<=560+r && y>=240-r && y<=240+r) {
                y=max(y, 240);
              }
              if (x>=560+r && x<=720-r && y>=240-r && y<=240+r) {
                y=240;
              }
              if (x>=720-r && x<=720+r && y>=240-r && y<=240+r) {
                x=min(x, 720);
              }
              if (x>=80-r && x<=80+r && y>=400+r && y<=560-r) {
                x=80;
              }
              if (x<=80-r && y>=400-r && y<=400+r) {
                x=min(x, 80);
                y=400;
                if (x<=r) {
                  x=720;
                }
              }
              if (x>=80+r && x<=240-r && y>=400-r && y<=400+r) {
                y=400;
              }
              if (x>=240-r && x<=240+r && y>=400-r && y<=400+r) {
                x=min(x, 240);
                y=min(y, 400);
              }
              if (x>=240-r && x<=240+r && y>=240+r && y<=400-r) {
                x=240;
              }
              if (x>=240-r && x<=240+r && y>=240-r && y<=240+r) {
                x=max(x, 240);
                y=max(y, 240);
              }
              if (x>=240+r && x<=400-r && y>=240-r && y<=240+r) {
                y=240;
              }
              if (x>=400-r && x<=400+r && y>=240-r && y<=240+r) {
                y=min(y, 240);
              }
              if (x>=400-r && x<=400+r && y>=80+r && y<=240-r) {
                x=400;
              }
              if (x>=400-r && x<=400+r && y>=80-r && y<=80+r) {
                y=max(y, 80);
              }
              if (x>=400+r && x<=560-r && y>=240-r && y<=240+r) {
                y=240;
              }
              if (x>=80-r && x<=80+r && y>=80+r && y<=400-r) {
                x=80;
              }
              if (x>=80-r && x<=80+r && y>=80-r && y<=80+r) {
                x=max(x, 80);
                y=max(y, 80);
              }
              if (x>=80+r && x<=400-r && y>=80-r && y<=80+r) {
                y=80;
              }
              if (x>=400+r && x<=720-r && y>=80-r && y<=80+r) {
                y=80;
              }
              if (x>=720-r && x<=720+r && y>=80-r && y<=80+r) {
                x=min(x, 720);
                y=max(y, 80);
              }
              if (x>=720-r && x<=720+r && y>=80+r && y<=240-r) {
                x=720;
              }
          
              ///////////////draw pacman///////////////////////////
          
              pushMatrix();
              translate(x, y);
              rotate(radians(m[0]*90));
              noStroke();
              fill(200+cos(per*2*PI/7)*55,120,200-cos(per*2*PI/7)*55);
              arc(0, 0, 2*r, 2*r, radians(30+cos(per*2*PI/7)*15), radians(330-cos(per*2*PI/7)*15));
          
              popMatrix();
              ///////////////////draw coins/////////////////////
          
              for (int i=0; i<=8; i++) {
                for (int j=0; j<=8; j++) {
                  num+=g[i][j];
          
                  if (dist(80+80*j, 80+80*i, x, y)<40) {
                    g[i][j]=1;
                  }
          
                  if (num==51) {
                    stroke(255);
                    strokeWeight(30);
                    backgroundd(k);
                    fill(255);
                    textSize(70);
                    text("YOU WON", 280, 300);
                    noLoop();
                  }
          
                  if (g[i][j]==0) {
                    fill(255);
                    ellipse(80+80*j, 80+80*i, 15, 15);
                  }
                }
              }
              textSize(30);
              text(num, 210, 840);
              num=-30;
              //////////////ghost moves///////////////
              stroke(#0012C6);
              noFill();
              if (m[95]==1) {                     ////////////define ghost move vector
                a[0]=a[0]-vghost;
              } else if (m[95]==2) {
                a[0]=a[0]+vghost;
              } else if (m[95]==3) {
                b[0]=b[0]-vghost;
              } else if (m[95]==4) {
                b[0]=b[0]+vghost;
              }
          
              if (m[195]==1) {                    ////////////define ghost move vector
                a[1]=a[1]-vghost;
              } else if (m[195]==2) {
                a[1]=a[1]+vghost;
              } else if (m[195]==3) {
                b[1]=b[1]-vghost;
              } else if (m[195]==4) {
                b[1]=b[1]+vghost;
              }
          
          
              for (int i=0; i<=1; i++) {
          
                for (int j=9; j>=1; j--) {                  ///////////record ghost defpoints ////////////
                  p[i][j]=p[i][j-1];
                  q[i][j]=q[i][j-1];
                }
          
                p[i][0]=a[i];
                q[i][0]=b[i];
          
               if (p[i][0]==p[i][1] && q[i][0]==q[i][1]) {        /////////ghost keep moving;do not stop////////
                  a[i]=a[i]+v[i];
                  b[i]=b[i]+v[i];
                }
          
          ////////////////////////////////////////wall constraint for ghost move//////////////////////////////
                if (a[i]>=400-r && a[i]<=400+r && b[i]>=560-r && b[i]<=560+r) {
                  b[i]=max(560, b[i]);
                }
                if (a[i]>=400-r && a[i]<=400+r && b[i]>=560+r && b[i]<=720-r) {
                  a[i]=400;
                }
                if (a[i]>=400-r && a[i]<=400+r && b[i]>=720-r) {
                  b[i]=min(720, b[i]);
                }
                if (a[i]>=80+r && a[i]<=400-r && b[i]>=720-r && b[i]<=720+r) {
                  b[i]=720;
                }
                if (a[i]>=80-r && a[i]<=80+r && b[i]>=720-r && b[i]<=720+r) {
                  a[i]=max(80, a[i]);
                  b[i]=min(b[i], 720);
                  v[i]=-v[i];
                }
                if (a[i]>=80-r && a[i]<=80+r && b[i]>=560+r && b[i]<=720-r) {
                  a[i]=80;
                }
                if (a[i]>=80-r && a[i]<=80+r && b[i]>=560-r && b[i]<=560+r) {
                  a[i]=max(a[i], 80);
                }
                if (a[i]>=80+r && a[i]<=400-r && b[i]>=560-r && b[i]<560+r) {
                  b[i]=560;
                }
                if (a[i]>=400+r && a[i]<=720-r && b[i]>=720-r && b[i]<=720+r) {
                  b[i]=720;
                }
                if (a[i]>=720-r && a[i]<=720+r && b[i]>=720-r && b[i]<=720+r) {
                  a[i]=min(720, a[i]);
                  b[i]=min(b[i], 720);
                  v[i]=-v[i];
                }
                if (a[i]>=720-r && a[i]<=720+r && b[i]>=240+r && b[i]<=400-r) {         ///////////////////////////////////
                  a[i]=720;
                }
                if (a[i]>=720-r && b[i]>=400-r && b[i]<=400+r) {
                  a[i]=max(720, a[i]);
                  if (a[i]>=800-gr) {
                    a[i]=80;
                  }
                }
                if (a[i]>=720-r && a[i]<=720+r && b[i]>=400+r && b[i]<=720-r) {
                  a[i]=720;
                }                                                                      //////////////////////////////////
                if (a[i]>=400+r && a[i]<=560-r && b[i]>=560-r && b[i]<=560+r) {
                  b[i]=560;
                }
                if (a[i]>=560-r && a[i]<=560+r && b[i]>=560-r && b[i]<=560+r) {
                  a[i]=min(a[i], 560);
                  b[i]=min(b[i], 560);
                  v[i]=-v[i];
                }
                if (a[i]>=560-r && a[i]<=560+r && b[i]>=240+r && b[i]<=560-r) {
                  a[i]=560;
                }
                if (a[i]>=560-r && a[i]<=560+r && b[i]>=240-r && b[i]<=240+r) {
                  b[i]=max(b[i], 240);
                }
                if (a[i]>=560+r && a[i]<=720-r && b[i]>=240-r && b[i]<=240+r) {
                  b[i]=240;
                }
                if (a[i]>=720-r && a[i]<=720+r && b[i]>=240-r && b[i]<=240+r) {
                  a[i]=min(a[i], 720);
                }
                if (a[i]>=80-r && a[i]<=80+r && b[i]>=400+r && b[i]<=560-r) {
                  a[i]=80;
                }
                if (a[i]<=80-r && b[i]>=400-r && b[i]<=400+r) {                            ///////////////////////////////////
                  a[i]=min(a[i], 80);
                  b[i]=400;
                  if (a[i]<=gr) {
                    a[i]=720;
                  }
                }
                if (a[i]>=80+r && a[i]<=240-r && b[i]>=400-r && b[i]<=400+r) {
                  b[i]=400;
                }
                if (a[i]>=240-r && a[i]<=240+r && b[i]>=400-r && b[i]<=400+r) {
                  a[i]=min(a[i], 240);
                  b[i]=min(b[i], 400);
                  v[i]=-v[i];
                }
                if (a[i]>=240-r && a[i]<=240+r && b[i]>=240+r && b[i]<=400-r) {
                  a[i]=240;
                }
                if (a[i]>=240-r && a[i]<=240+r && b[i]>=240-r && b[i]<=240+r) {
                  a[i]=max(a[i], 240);
                  b[i]=max(b[i], 240);
                  v[i]=-v[i];
                }
                if (a[i]>=240+r && a[i]<=400-r && b[i]>=240-r && b[i]<=240+r) {
                  b[i]=240;
                }
                if (a[i]>=400-r && a[i]<=400+r && b[i]>=240-r && b[i]<=240+r) {
                  b[i]=min(b[i], 240);
                }
                if (a[i]>=400-r && a[i]<=400+r && b[i]>=80+r && b[i]<=240-r) {
                  a[i]=400;
                }
                if (a[i]>=400-r && a[i]<=400+r && b[i]>=80-r && b[i]<=80+r) {
                  b[i]=max(b[i], 80);
                }
                if (a[i]>=400+r && a[i]<=560-r && b[i]>=240-r && b[i]<=240+r) {
                  b[i]=240;
                }
                if (a[i]>=80-r && a[i]<=80+r && b[i]>=80+r && b[i]<=400-r) {
                  a[i]=80;
                }
                if (a[i]>=80-r && a[i]<=80+r && b[i]>=80-r && b[i]<=80+r) {
                  a[i]=max(a[i], 80);
                  b[i]=max(b[i], 80);
                  v[i]=-v[i];
                }
                if (a[i]>=80+r && a[i]<=400-r && b[i]>=80-r && b[i]<=80+r) {
                  b[i]=80;
                }
                if (a[i]>=400+r && a[i]<=720-r && b[i]>=80-r && b[i]<=80+r) {
                  b[i]=80;
                }
                if (a[i]>=720-r && a[i]<=720+r && b[i]>=80-r && b[i]<=80+r) {
                  a[i]=min(a[i], 720);
                  b[i]=max(b[i], 80);
                  v[i]=-v[i];
                }
                if (a[i]>=720-r && a[i]<=720+r && b[i]>=80+r && b[i]<=240-r) {
                  a[i]=720;
                }
                ///////////////////////draw ghosts////////////////////////////
                noStroke();                                                            
                fill(255*i, 255-255*i, 255-255*i);
                arc(a[i], b[i], 2*gr, 2*gr, PI, 2*PI);
                beginShape();
                vertex(a[i]-gr, b[i]);
                vertex(a[i]-gr, b[i]+gr);
                vertex(a[i]-gr*3/4+cos(per*2*PI/7)*6, b[i]+gr);
                vertex(a[i]-gr*1/2+cos(per*2*PI/7)*6, b[i]+gr*3/4);
                vertex(a[i]-gr*1/4+cos(per*2*PI/7)*6, b[i]+gr);
                vertex(a[i]+gr*1/4+cos(per*2*PI/7)*6, b[i]+gr);
                vertex(a[i]+gr*1/2+cos(per*2*PI/7)*6, b[i]+gr*3/4);
                vertex(a[i]+gr*3/4+cos(per*2*PI/7)*6, b[i]+gr);
                vertex(a[i]+gr, b[i]+gr);
                vertex(a[i]+gr, b[i]);
                endShape();
          
                fill(255);
                ellipse(a[i]-gr/3, b[i]-gr/4, 12, 16);
                pushMatrix();
                translate(a[i]-gr/3, b[i]-gr/4);
                rotate(0.5*PI-atan2(x-a[i]+gr/3, y-b[i]+gr/4));
                fill(#4856A5);
                ellipse(gr/6, 0, 6, 8);
                popMatrix();
                fill(255);
                ellipse(a[i]+gr/3, b[i]-gr/4, 12, 16);
                pushMatrix();
                translate(a[i]+gr/3, b[i]-gr/4);
                rotate(0.5*PI-atan2(x-a[i]-gr/3, y-b[i]+gr/4));
                fill(#4856A5);
                ellipse(gr/6, 0, 6, 8);
                popMatrix();
                /////////////game over////////////////
                if (dist(a[i], b[i], x, y)<=2*gr) {
                  textSize(50);
                  fill(255, 0, 0);
                  text("Game Over...", 250, 400);
                  noLoop();
                }
          
                stroke(#0012C6);
                noFill();
              }
            }
          }
          
          void pacmove() {
          
            for (int i=199; i>=1; i--) {                        ////////////record pacman moves
              m[i]=m[i-1];
            }
          
            if (dist(mouseX, mouseY, btx[1], bty[1])<=15) {
              x=x-10;
              m[0]=2;
            } else if (dist(mouseX, mouseY, btx[3], bty[3])<=15) {
              x=x+10;
              m[0]=4;
            } else if (dist(mouseX, mouseY, btx[0], bty[0])<=15) {
              y=y-10;
              m[0]=3;
            } else if (dist(mouseX, mouseY, btx[2], bty[2])<=15) {
              y=y+10;
              m[0]=1;
            }
          }
          
          void backgroundd(int k) {
          
            line(15, 15, width-15, 15);
            line(15, height-115, width-15, height-115);
            line(15, 15, 15, 2*k);
            line(15, 3*k, 15, height-115);
            line(width-15, 15, width-15, 2*k);
            line(width-15, 3*k, width-15, height-115);
            line(2*k, 2*k, 2*k, 3*k);
            line(3*k, 2*k, 3*k, 3*k);
            line(2*k, 3*k, 3*k, 3*k);
            line(k, k, 2*k, k);
            line(k, k, k, 2*k);
            line(3*k, k, 4*k, k);
            line(k, 3*k, 2*k, 3*k);
            line(k, 4*k, 2*k, 4*k);
            line(3*k, 4*k, 4*k, 4*k);
            line(4*k, 2*k, 4*k, 4*k);
          
            strokeWeight(10);
            stroke(255);
            line(2*k+20, 2*k, 3*k-20, 2*k);
          }
    </script>
        <canvas id="sketch" style="border: 1px solid rgb(0, 0, 0);"></canvas>
    </div>
</body>

</html>